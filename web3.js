const Web3 = require('web3');

const ethereumUri = 'http://localhost:8545';
const address = '00x63bF7ADdd173e0775A9Cb74c7edCEE0f1Ad8d51B'; // user

let web3 = new Web3();
web3.setProvider(new web3.providers.HttpProvider(ethereumUri));

if(!web3.isConnected()){
    throw new Error('unable to connect to ethereum node at ' + ethereumUri);
}else{
    console.log('connected to ehterum node at ' + ethereumUri);
}

// creation of contract object
var MyContract = web3.eth.contract([{"constant":false,"inputs":[{"name":"key","type":"bytes"},{"name":"isEarly","type":"bool"}],"name":"update_isEarly","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"owner_2","outputs":[{"name":"","type":"address"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"id","type":"uint256"},{"name":"price","type":"uint256"}],"name":"edit_promotion","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"key","type":"bytes"},{"name":"user_id","type":"bytes"},{"name":"date","type":"bytes"},{"name":"room_type","type":"uint256"},{"name":"order_id","type":"bytes"},{"name":"price","type":"uint256"}],"name":"new_order","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"discount_weekday","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"key","type":"bytes"}],"name":"get_price","outputs":[{"name":"","type":"bool"},{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"old_key","type":"bytes"},{"name":"new_key","type":"bytes"},{"name":"user_id","type":"bytes"},{"name":"date","type":"bytes"},{"name":"room_type","type":"uint256"},{"name":"order_id","type":"bytes"},{"name":"price","type":"uint256"}],"name":"update_order","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"discount_version","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"promotions","outputs":[{"name":"id","type":"uint256"},{"name":"price","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"key","type":"bytes"}],"name":"delete_room","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"order_id","type":"bytes"},{"name":"key","type":"bytes"}],"name":"delete_order","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"name":"","type":"address"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"key","type":"bytes"}],"name":"room_detail_1","outputs":[{"name":"","type":"uint256"},{"name":"","type":"uint256"},{"name":"","type":"uint256"},{"name":"","type":"uint256"},{"name":"","type":"uint256"},{"name":"","type":"bool"},{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"key","type":"bytes"},{"name":"total","type":"uint256"},{"name":"soldout","type":"uint256"},{"name":"original_price","type":"uint256"},{"name":"promotion_id","type":"uint256"},{"name":"isHoliday","type":"bool"}],"name":"edit_room","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"discount_weekend","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"discount_lastroom","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"key","type":"bytes"},{"name":"total","type":"uint256"},{"name":"original_price","type":"uint256"},{"name":"sell_price","type":"uint256"},{"name":"promotion_id","type":"uint256"},{"name":"isHoliday","type":"bool"},{"name":"isEarly","type":"bool"}],"name":"new_room","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"key","type":"bytes"},{"name":"price","type":"uint256"}],"name":"state_change","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"key","type":"bytes"}],"name":"check","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"new_discount_weekday","type":"uint256"},{"name":"new_discount_weekend","type":"uint256"},{"name":"new_discount_lastroom","type":"uint256"}],"name":"set_discount","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"id","type":"uint256"},{"name":"price","type":"uint256"}],"name":"new_promotion","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"key","type":"bytes"},{"name":"isNight","type":"bool"}],"name":"update_isNight","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"key","type":"bytes"}],"name":"room_detail_2","outputs":[{"name":"","type":"bool"},{"name":"","type":"uint256"},{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"id","type":"uint256"}],"name":"delete_promotion","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"order_id","type":"bytes"}],"name":"order_detail","outputs":[{"name":"","type":"bytes"},{"name":"","type":"bytes"},{"name":"","type":"bytes"},{"name":"","type":"uint256"},{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"newOwner","type":"address"}],"name":"addOwnership","outputs":[],"payable":false,"type":"function"},{"inputs":[],"payable":false,"type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"name":"key","type":"bytes"},{"indexed":false,"name":"user_id","type":"bytes"},{"indexed":false,"name":"order_id","type":"bytes"},{"indexed":false,"name":"check","type":"bool"}],"name":"new_order_event","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"new_key","type":"bytes"},{"indexed":false,"name":"user_id","type":"bytes"},{"indexed":false,"name":"order_id","type":"bytes"},{"indexed":false,"name":"check","type":"bool"}],"name":"update_order_event","type":"event"}])
myContractAddress ='0x106A757c1A19603E88627fA472a0f2A1183793a8';	//ethereum 中 contract 的 address
var myContractInstance = MyContract.at(myContractAddress);	// initiate contract for an address

module.exports = {
	web3, myContractInstance
}